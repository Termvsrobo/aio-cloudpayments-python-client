CHANGES
=======

2.0.0 (2024-12-17)
==================
* Асинхронная версия клиента для Python 3.7+.
* Переименованы функции для работы с асинхронным API.
* Удалены синхронные зависимости, добавлена поддержка `aiohttp` для асинхронных запросов.
* Изменена структура вызова методов: теперь используются `async`/`await`.

1.6.4 (2021-09-13)
==================

* Исправлен баг с форматированием даты без часового пояса при вызове ``CloudPayments.create_subscription``.

1.6.3 (2021-03-15)
==================

* Добавлен метод для получения списка подписок ``CloudPayments.list_subscriptions``.

1.6.2 (2020-10-22)
==================

* Добавлена расшифровка кодов ошибок 5007, 5014, 5075 и 5207

1.6.1 (2020-06-04)
==================

* В метод ``CloudPayments.refund`` добавлен аргумент ``request_id`` для опционального идентификатора идемпотентного запроса.
* Метод ``CloudPayments.refund`` теперь возвращает идентификатор транзакции возврата.


1.6.0 (2019-06-27)
==================

* В метод ``CloudPayments.charge_card`` добавлено поле ``service_fee``.
* Прекращена поддержка Python 2.6 и Python 3.3


1.5.1 (2019-01-26)
==================

* Исправлен запуск на Python 2


1.5.0 (2019-01-26)
==================

* Добавлен метод для получения данных чека ``CloudPayments.get_receipt``.


1.4.2 (2018-06-07)
==================

* Добавлен метод для получения информации о траннзакии ``CloudPayments.get_transaction``.
* В ``PaymentError`` добавлено поле ``transaction_id``.


1.4.1 (2018-04-15)
==================

* Добавлен метод для выплат по токену ``CloudPayments.topup``.


1.4.0 (2017-09-15)
==================

* Метод ``CloudPayments.create_receipt`` теперь возвращает уникальный идентификатор чека, поставленного в очередь. 


1.3.2 (2017-08-30)
==================

* В метод ``CloudPayments.confirm_payment`` добавлен необязательный аргумент ``data`` для передачи в запросе произвольных данных.


1.3.1 (2017-06-10)
==================

* Исправлена ошибка при установке на Python 3.


1.3 (2017-06-10)
================

* Добавлен метод ``CloudPayments.create_receipt`` для формирования кассового чека.
* В метод ``CloudPayments.test`` добавлен необязательный аргумент ``request_id`` для передачи идентификатора идемпотентного запроса.
* Метод ``CloudPayments.test`` теперь возвращает сообщение, полученное от сервера.
* Тип исключения, бросаемого методом ``CloudPayments.finish_3d_secure_authentication``, изменен с ``CloudPaymentsError`` на ``PaymentError``.
* В исключение ``PaymentError`` добавлены поля ``verbose_reason`` и ``verbose_message``, содержащие описания ошибок из документации.


1.2 (2016-06-21)
================

* Исправлено неверное форматирование дат, из-за которого сервис неправильно интерпретировал передаваемые даты.
* В исключение ``PaymentError`` добавлено поле cardholder_message с сообщением, которое выводится для пользователя.
* Метод ``redirect_url`` у ``Secure3d`` заменен на ``redirect_params``, возвращающий словарь с параметрами для POST-запроса.


1.1 (2016-06-03)
================

* Исправлены ошибки, возникающие, когда при оплате по криптограмме требуется 3-D Secure аутентификация.